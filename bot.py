import random
import os
from telegram import Update
from telegram.ext import Application, CommandHandler, CallbackContext

# جلب توكن البوت من المتغيرات البيئية
TOKEN = os.getenv("TOKEN")

# قائمة الفوائد الرمضانية
ramadan_fawaid = [
    "📜 **راءُ رَمَضَان:** رَحْمَةُ الله للصَّائِمِين، وَالمِيمُ: مَغْفِرَتُهُ لِلمُؤَمِّنِينَ، وَالضَّادُ: ضَمَانُهُ لِجَزَاءِ الصَّائِمِينَ، وَالأَلْفُ: إِحْسَانُهُ للطَائِعين، والنونُ: نُورُه لِلمُحْسِنِينَ.",
    "🌙 **يا بُنَيَّ!** إن رَمَضان نِعْمَة للمسلِمين؛ يَجِيْء بالرحمة والمغفرة والعِتق وقايَة للمؤمنين! فقابِله بالاستقامة، ولا تَتَّبع خُطوات الفاسِدين؛ في الخبر: « إذا جاء رمضان، فُتِحَت أبْوابُ الجَنة » للصالِحين « وغُلِّقَت أبواب النار » عن المُستجيبين « وصُفِّدت الشياطين » دون التائبين.",
    "💡 **فائدة:** الظروف الأرضية هي التي تجعل ليلة القدر متحركة من ليلة لأخرى من ليالي وتر العشر الأخير من رمضان، وأما في السموات فثابتة!",
    "🌙 **رمضان فرصة عظيمة للتوبة**، فلا تدع أيامه تمر دون أن تغتنمها في القرب من الله، والتخلص من العادات السيئة، وبناء روحك بالإيمان.",
    "🕌 **في رمضان** يزداد الخير، وتتنزل الرحمات، وتضاعف الحسنات، فلا تفوت لحظة من هذا الشهر دون عمل صالح يقربك إلى الله.",
    "📖 **الصيام ليس فقط عن الطعام والشراب، بل عن الغيبة والنميمة، وسوء الخلق.** اجعل رمضان نقطة انطلاق لتكون أفضل نسخة من نفسك.",
    "🤲 **الدعاء في رمضان مستجاب**، فلا تبخل على نفسك بالدعاء، ولا تنس أن ترفع يديك لله في الأوقات المباركة.",
    "🌠 **ليلة القدر خير من ألف شهر**، فاجتهد في العشر الأواخر، فقد يكون فيها نصيبك من الرحمة والمغفرة والعتق من النار.",
    "📜 **كان النبي ﷺ أجود الناس، وكان أجود ما يكون في رمضان**. فاجعل رمضان شهر العطاء، وساعد الفقراء والمحتاجين.",
    "🌟 **قال ﷺ: من صام رمضان إيمانًا واحتسابًا غفر له ما تقدم من ذنبه**. فاجعل صيامك عن قناعة وإخلاص لله.",
]

# دالة لإرسال فائدة رمضانية عشوائية
async def send_faidah(update: Update, context: CallbackContext):
    faidah = random.choice(ramadan_fawaid)
    await update.message.reply_text(f"💡 {faidah}")

# إعداد البوت وتشغيله
def main():
    app = Application.builder().token(TOKEN).build()

    app.add_handler(CommandHandler("start", lambda u, c: u.message.reply_text(
        "🌙 مرحبًا في بوت رمضان!\n"
        "💡 استخدم /faidah للحصول على فائدة رمضانية"
    )))

    app.add_handler(CommandHandler("faidah", send_faidah))

    app.run_polling()

if __name__ == "__main__":
    main()
